- content_for :css do
  = stylesheet_link_tag 'newsfeed'
  = stylesheet_link_tag 'post_list'
.container.mt-90.mb-90
  .grid.grid-3-6-3.mt-3
    .grid-column
      - if logged_in?
        .w-100.add-button-div
          = link_to(new_post_path ,class: "primary-button btn text-center m-0 h-100") do 
            | Add Post
            i.fa-solid.fa-plus.ms-2
      - unless @users.empty?
        .widget-box.filter-box.pt-4.pb-4
          = form_with model: @form, url: posts_path, method: :get, class: "form-inline" do |form|
            p.m-0 Filter By User
            .d-flex.justify-content-between.align-items-center.mt-4.filter-form
              select.w-100.form-select name="filter"
                option value="" selected="selected" All User
                - @users.each do |user|
                  - if user.id.to_s == params[:filter]
                    option value="#{user.id}" selected="selected" #{user.name}
                  - else
                    option value="#{user.id}" #{user.name}
              .search-icon
                button type="submit" class="border-0 w-100 h-100 bg-transparent"
                  i.fa-solid.fa-magnifying-glass
    .grid-column
      .widget-box
        .quick-post-header.search-box.d-flex.align-items-center
          .option-items.h-100.w-100
            = form_with model: @form, url: posts_path, method: :get, class: "form-inline" do |f|
              input type="text" name="search" class= "title-box form-control h-100" placeholder= "Search with post title" value= "#{params[:search]}"
              .search-icon
                button type="submit" class="border-0 w-100 h-100 bg-transparent"
                  i.fa-solid.fa-magnifying-glass
      - if @posts.empty?
        h6 No Post To Display
      - else
        - @posts.each do |post|
          .widget-box
            .widget-box-status
              .widget-box-status-content
                .user-info.pe-4
                  = link_to(user_path(post.user), class: "profile") do
                    .profile-image-frame
                  = link_to(user_path(post.user)) do
                    p.username.m-0
                      b
                        = post.user.name
                  p.mt-2.mb-0.upload-time
                    = post.created_at.strftime("%Y/%m/%d %I:%M:%S %p " )
                .widget-box-content-text.mt-3
                  p
                    = post.title
                  p
                    =raw post.description
                - if post.image_data.attached?
                  .w-100.mt-3
                    .image-frame
                      img.w-100.h-100 src=(url_for(post.image_data))
